(function(a){a.AdManager=function(f,b){var e=this;e.prefix="AD_";e.ads=f;e.ad={};e.fcapLeftTime=b||3600;e.now=Date.parse(new Date())/1000;if(navigator.userLanguage){e.userLanguage=navigator.userLanguage.toLowerCase()}else{e.userLanguage=navigator.language.toLowerCase()}var g=e.prefix+"enterTime";if(typeof(a.cookie(g))=="undefined"||(e.now>(parseInt(a.cookie(g))+e.fcapLeftTime))){a.cookie(g,e.now,{expires:1,path:"/"});for(var c in f){a.cookie(e.prefix+f[c].id,0,{expires:1,path:"/"})}}e.dateByTimezone=function(h){d=new Date();utc=d.getTime()+(d.getTimezoneOffset()*60000);nd=new Date(utc+(3600000*h));return nd};e.random=function(i,h){return Math.floor(Math.random()*(h-i+1)+i)};e.weight=function(o){var n=0;var j=[];for(var h in o){n+=o[h].weight;for(var l=0;l<o[h].weight;l++){j.push(h)}}var m=e.random(0,j.length-1);return o[j[m]]};e.adSort=function(h,i){if(h.weight<i.weight){return 1}else{if(h.weight==i.weight){if(h.fcap<i.fcap){return 1}else{if(h.fcap==i.fcap){return 0}else{return -1}}}else{return -1}}};e.incrementAdCount=function(h){a.cookie(e.prefix+h,e.adCount(h)+1,{expires:1,path:"/"})};e.adCount=function(h){return(typeof(a.cookie(e.prefix+h))=="undefined")?0:parseInt(a.cookie(e.prefix+h))};e.getAd=function(h,l){var m=[];adsloop:for(var k in h){if(l==h[k].adspot){h[k].fcap=h[k].fcap||false;h[k].exclude=h[k].exclude||false;h[k].schedule=h[k].schedule||false;h[k].maxWidth=h[k].maxWidth||false;h[k].minWidth=h[k].minWidth||false;h[k].timezone=h[k].timezone||false;h[k].domain=h[k].domain||false;if(h[k].maxWidth&&a(window).width()>=h[k].maxWidth){continue}if(h[k].minWidth&&a(window).width()<h[k].minWidth){continue}if(h[k].fcap&&e.adCount(h[k].id)>=h[k].fcap){continue}if(h[k].exclude&&a.inArray(e.userLanguage,h[k].exclude)>-1){continue}if(h[k].domain&&a.isArray(h[k].domain)){for(var o in h[k].domain){if(document.location.hostname.indexOf(h[k].domain[o])==-1){continue adsloop}}}if(h[k].schedule){var j=h[k].timezone?e.dateByTimezone(h[k].timezone).getDay():(new Date()).getDay();if(!h[k].schedule[j]){continue}}m.push(h[k])}}m=m.sort(e.adSort);if(m.length){if(!m[0].fcap){return e.weight(m)}else{return m[0]}}return{}};e.show=function(h){var i=e.getAd(e.ads,h);if(i.id){e.incrementAdCount(i.id);document.write(i.script||i.code)}}}}(jQuery));